(function(a){a.fn.timepicki=function(b){var d={format_output:function(g,e,f){if(c.show_meridian){g=Math.min(Math.max(parseInt(g),1),12);if(g<10){g="0"+g;
}e=Math.min(Math.max(parseInt(e),0),59);if(e<10){e="0"+e;}return g+":"+e+" "+f;}else{g=Math.min(Math.max(parseInt(g),0),23);if(g<10){g="0"+g;}e=Math.min(Math.max(parseInt(e),0),59);
if(e<10){e="0"+e;}e=Math.min(Math.max(parseInt(e),0),59);return g+":"+e;}},increase_direction:"up",custom_classes:"",min_hour_value:1,max_hour_value:12,show_meridian:true,step_size_hours:"1",step_size_minutes:"1",overflow_minutes:false,disable_keyboard_mobile:false,reset:false,on_change:null};
var c=a.extend({},d,b);return this.each(function(){var m=a(this);var u=m.outerHeight();u+=10;a(m).wrap("<div class='time_pick'>");var p=a(this).parents(".time_pick");
var w=(c.increase_direction==="down")?"<div class='prev action-prev'></div>":"<div class='prev action-next'></div>";var v=(c.increase_direction==="down")?"<div class='next action-next'></div>":"<div class='next action-prev'></div>";
var r=a("<div class='timepicker_wrap "+c.custom_classes+"'><div class='arrow_top'></div><div class='time'>"+w+"<div class='ti_tx'><input type='text' class='timepicki-input'"+(c.disable_keyboard_mobile?"readonly":"")+"></div>"+v+"</div><div class='mins'>"+w+"<div class='mi_tx'><input type='text' class='timepicki-input'"+(c.disable_keyboard_mobile?"readonly":"")+"></div>"+v+"</div>");
if(c.show_meridian){r.append("<div class='meridian'>"+w+"<div class='mer_tx'><input type='text' class='timepicki-input' readonly></div>"+v+"</div>");}if(c.reset){r.append("<div><a href='#' class='reset_time'>Reset</a></div>");
}p.append(r);var n=a(this).next(".timepicker_wrap");var k=n.find("div");var h=p.find("input");a(".reset_time").on("click",function(x){m.val("");l();});
a(".timepicki-input").keydown(function(y){if(y.keyCode==13){y.preventDefault();e();l();return;}var C=a(this).parent().parent();var z=a(this);var A=z.val();
function B(){var E=/^\d+$/.test(z.val());var G=z.val()==="";if(C.hasClass("time")){if(E){var D=(c.show_meridian)?Math.min(Math.max(parseInt(z.val()),1),12):Math.min(Math.max(parseInt(z.val()),0),23);
z.val(D);}else{if(!G){z.val(A);}}}else{if(C.hasClass("mins")){if(E){var F=Math.min(Math.max(parseInt(z.val()),0),59);z.val(F);}else{if(!G){z.val(A);}}}else{if(C.hasClass("meridian")){y.preventDefault();
}else{}}}}done=false;function x(){if(!done){B();done=true;}}setTimeout(x,0);});a(document).on("click",function(y){if(!a(y.target).is(n)&&n.css("display")=="block"&&!a(y.target).is(a(".reset_time"))){if(!a(y.target).is(m)){e(y,!q(a(y.target)));
}else{var x=0;n.css({top:u+"px",left:x+"px"});i();}}});m.on("focus",i);h.on("focus",function(){var x=a(this);if(!x.is(m)){x.select();}});h.on("keydown",function(z){var y,x=a(this);
if(z.which===38){if(c.increase_direction==="down"){y="prev";}else{y="next";}}else{if(z.which===40){if(c.increase_direction==="down"){y="next";}else{y="prev";
}}}if(x.closest(".timepicker_wrap .time").length){s(null,y);}else{if(x.closest(".timepicker_wrap .mins").length){t(null,y);}else{if(x.closest(".timepicker_wrap .meridian").length&&c.show_meridian){j(null,y);
}}}});h.on("blur",function(){setTimeout(function(){var x=a(document.activeElement);if(x.is(":input")&&!q(x)){e();l();}},0);});function q(x){return a.contains(p[0],x[0])||p.is(x);
}function e(y,A){var B=n.find(".ti_tx input").val();var x=n.find(".mi_tx input").val();var z="";if(c.show_meridian){z=n.find(".mer_tx input").val();}if(B.length!==0&&x.length!==0&&(!c.show_meridian||z.length!==0)){m.attr("data-timepicki-tim",B);
m.attr("data-timepicki-mini",x);if(c.show_meridian){m.attr("data-timepicki-meri",z);m.val(c.format_output(B,x,z));}else{m.val(c.format_output(B,x));}}if(c.on_change!==null){c.on_change(m[0]);
}if(A){l();}}function i(){o(c.start_time);n.fadeIn();var x=n.find("input:visible").first();x.focus();var y=function(B){if(B.which===9&&B.shiftKey){x.off("keydown",y);
var z=a(":input:visible:not(.timepicki-input)");var C=z.index(m);var A=z.get(C-1);A.focus();}};x.on("keydown",y);}function l(){n.fadeOut();}function o(A){var B,z,x,y;
if(m.is("[data-timepicki-tim]")){z=Number(m.attr("data-timepicki-tim"));x=Number(m.attr("data-timepicki-mini"));if(c.show_meridian){y=m.attr("data-timepicki-meri");
}}else{if(typeof A==="object"){z=Number(A[0]);x=Number(A[1]);if(c.show_meridian){y=A[2];}}else{B=new Date();z=B.getHours();x=B.getMinutes();y="AM";if(c.show_meridian){if(z==0){z=12;
}else{if(z==12){y="PM";}else{if(z>12){z-=12;y="PM";}}}}}}if(z<10){n.find(".ti_tx input").val("0"+z);}else{n.find(".ti_tx input").val(z);}if(x<10){n.find(".mi_tx input").val("0"+x);
}else{n.find(".mi_tx input").val(x);}if(c.show_meridian){if(y<10){n.find(".mer_tx input").val("0"+y);}else{n.find(".mer_tx input").val(y);}}}function s(E,B){var x="time";
var z=Number(n.find("."+x+" .ti_tx input").val());var D=Number(c.min_hour_value);var F=Number(c.max_hour_value);var C=Number(c.step_size_hours);if((E&&E.hasClass("action-next"))||B==="next"){if(z+C>F){var G=D;
if(G<10){G="0"+G;}else{G=String(G);}n.find("."+x+" .ti_tx input").val(G);}else{z=z+C;if(z<10){z="0"+z;}n.find("."+x+" .ti_tx input").val(z);}}else{if((E&&E.hasClass("action-prev"))||B==="prev"){var A=Number(c.min_hour_value);
if(z-C<A){var y=F;if(y<10){y="0"+y;}else{y=String(y);}n.find("."+x+" .ti_tx input").val(y);}else{z=z-C;if(z<10){z="0"+z;}n.find("."+x+" .ti_tx input").val(z);
}}}}function t(D,B){var A="mins";var C=Number(n.find("."+A+" .mi_tx input").val());var z=0;var y=59;var x=Number(c.step_size_minutes);if((D&&D.hasClass("action-next"))||B==="next"){if(C+x>y){n.find("."+A+" .mi_tx input").val("00");
if(c.overflow_minutes){s(null,"next");}}else{C=C+x;if(C<10){n.find("."+A+" .mi_tx input").val("0"+C);}else{n.find("."+A+" .mi_tx input").val(C);}}}else{if((D&&D.hasClass("action-prev"))||B==="prev"){if(C-x<=-1){n.find("."+A+" .mi_tx input").val(y+1-x);
if(c.overflow_minutes){s(null,"prev");}}else{C=C-x;if(C<10){n.find("."+A+" .mi_tx input").val("0"+C);}else{n.find("."+A+" .mi_tx input").val(C);}}}}}function j(C,B){var z="meridian";
var y=0;var x=1;var A=null;A=n.find("."+z+" .mer_tx input").val();if((C&&C.hasClass("action-next"))||B==="next"){if(A=="AM"){n.find("."+z+" .mer_tx input").val("PM");
}else{n.find("."+z+" .mer_tx input").val("AM");}}else{if((C&&C.hasClass("action-prev"))||B==="prev"){if(A=="AM"){n.find("."+z+" .mer_tx input").val("PM");
}else{n.find("."+z+" .mer_tx input").val("AM");}}}}var g=n.find(".action-next");var f=n.find(".action-prev");a(f).add(g).on("click",function(){var x=a(this);
if(x.parent().attr("class")=="time"){s(x);}else{if(x.parent().attr("class")=="mins"){t(x);}else{if(c.show_meridian){j(x);}}}});});};}(jQuery));