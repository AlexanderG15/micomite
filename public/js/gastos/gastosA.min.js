var combos=id_tipo_padre=id_tipo_gastoP=caso=id_periodo=0;var Registrogasto=Registrogastoadicional=RegistroPagoPropietario=TotalesMes="";var v_totales_mes=v_gastos=v_gastos_adicionales=v_calculo_gcomunes="";
var mes=[];mes[0]="";mes[1]="ENERO";mes[2]="FEBRERO";mes[3]="MAYO";mes[4]="ABRIL";mes[5]="MAYO";mes[6]="JUNIO";mes[7]="JULIO";mes[8]="AGOSTO";mes[9]="SEPTIEMBRE";
mes[10]="OCTUBRE";mes[11]="NOVIEMBRE";mes[12]="DICIEMBRE";var RegistroApartamento="";var parametroAjax={token:$("input[name=_token]").val(),tipo:"POST",data:{},ruta:"",async:false};
var cargarTablaGastos=function(a){$("#tablaGastos").dataTable({columnDefs:[{targets:-1,data:null,targets:[1],searchable:true,}],language:{url:"/DataTables-1.10.10/de_DE-all.txt"},data:a,columns:[{title:"Id",data:"id_pago_gcomun",visible:0},{title:"Tipo de Gasto",data:"tipo_gasto"},{title:"Concepto",data:"concepto_detalle"},{title:"Fecha Factura",data:"fecha_factura"},{title:"Monto",data:"monto",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Archivo",data:"urlimage",visible:0},{title:"Sede",data:"id_sede",visible:0},{title:"Fecha de Carga",data:"fecha_carga",visible:0}],});};var cargarTablaGastosConsulta=function(a){$("#tablaResumenGastosMes").DataTable({paging:false,ordering:false,info:false,searching:false,searchable:false,data:a,language:{url:"/DataTables-1.10.10/de_DE-all.txt"},columns:[{title:"Id",data:"id_pago_gcomun",visible:0},{title:"Concepto",data:"concepto_detalle"},{title:"Fecha Factura",data:"fecha_factura",width:"10%"},{title:"Monto",data:"monto",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Archivo",data:"urlimage",visible:0},{title:"Sede",data:"id_sede",visible:0},{title:"Fecha de Carga",data:"fecha_carga",width:"10%"}]});};var imprimirGasto=function(){var a={v_totales_mes:v_totales_mes,v_gastos:v_gastos,v_gastos_adicionales:v_gastos_adicionales,v_calculo_gcomunes:v_calculo_gcomunes};
OpenWindowWithPost("/reportes/reporte_gastos_comunes.php","_blank","f",a);};var cargarTablaPagosPropietario=function(a){$("#tablaPagosPropietarios").dataTable({columnDefs:[{targets:-1,data:null,targets:[1],searchable:true,}],language:{url:"/DataTables-1.10.10/de_DE-all.txt"},data:a,columns:[{title:"Id",data:"id_pago_propietario",visible:0},{title:"Fecha Facturación",data:"fecha_inicio"},{title:"Mes Facturación",data:"mes_inicio"},{title:"Nro. Dpto",data:"numero"},{title:"Propietario",data:"propietario"},{title:"Monto Deuda",data:"monto_deuda",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Monto Pagado",data:"monto",render:function(e,c,b){return formatoCentimos(e);}},{title:"Fecha de Pago",data:"fecha_pago"},{title:"Código de Verificación",data:"codigo_verificacion"}],fnCreatedRow:function(e,c,b){if(c.estatus=="R"){$(e).css("color","#DF0101");
}if(c.estatus=="A"){$(e).css("color","#FF8000");}if(c.estatus=="C"){$(e).css("color","#088A08");}},});};var cargarTablaGastosComunes=function(b){var a=$("#tablaGastosComunes").DataTable({paging:false,ordering:false,info:false,searching:false,searchable:false,data:b,language:{url:"/DataTables-1.10.10/de_DE-all.txt"},columns:[{title:"Id",data:"id_pago_gcomun",visible:0},{title:"Tipo de Gasto",data:"tipo_gasto"},{title:"Concepto",data:"concepto_detalle"},{title:"Fecha Factura",data:"fecha_factura"},{title:"Monto",data:"monto",render:function(f,e,c){return formatoCentimos(f);
}},{title:"Sede",data:"id_sede",visible:0},{title:"Fecha de Carga",data:"fecha_carga",visible:0}]});};var cargarTablaCalculoGcomunes=function(a){$("#tablaCalculoGcomunes").dataTable({paging:false,ordering:false,info:false,searching:false,data:a,language:{url:"/DataTables-1.10.10/de_DE-all.txt"},columns:[{title:"Nro. Apto",data:"numero"},{title:"Propietario",data:"propietario"},{title:"Prorretaje %",data:"prorretaje"},{title:"Monto Gastos Comunes",data:"monto_gcomunes",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Monto Fondo de Reserva",data:"valor_gasto_reserva",render:function(e,c,b){return formatoCentimos(e);}},{title:"Monto Adicionales",data:"monto_adicional",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Monto Total",data:"monto_total_deuda",render:function(e,c,b){return formatoCentimos(e);}},{title:"Saldo a Favor",data:null},{title:"Saldo Deudor",data:null}]});
};var cargarTablaGastosAdicionales=function(a){$("#tablaGastosAdicionales").dataTable({columnDefs:[{targets:-1,data:null,targets:[1],searchable:true,}],language:{url:"/DataTables-1.10.10/de_DE-all.txt"},data:a,columns:[{title:"Id",data:"id_pago_adicional",visible:0},{title:"Tipo de Gasto",data:"tipo_gasto"},{title:"Concepto",data:"concepto_detalle"},{title:"Propietario",data:"propietario"},{title:"Fecha Carga",data:"fecha_carga"},{title:"Monto",data:"monto",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Descripcion",data:"descripcion"},{title:"Sede",data:"id_sede",visible:0}],});};var cargarTablaGastosAdicionalesConsulta=function(a){$("#tablaGastosAdicionalesConsulta").dataTable({paging:false,ordering:false,info:false,searching:false,searchable:false,data:a,language:{url:"/DataTables-1.10.10/de_DE-all.txt"},columns:[{title:"Id",data:"id_pago_adicional",visible:0},{title:"Concepto",data:"concepto_detalle"},{title:"Propietario",data:"propietario"},{title:"Fecha Carga",data:"fecha_carga"},{title:"Monto",data:"monto",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Descripcion",data:"descripcion"},{title:"Sede",data:"id_sede",visible:0}],});};var cargarTablaConsultaGastos=function(a){$("#tablaConsultaGastos").dataTable({paging:false,ordering:false,info:false,searching:false,data:a,language:{url:"/DataTables-1.10.10/de_DE-all.txt"},columns:[{title:"Id",data:"id_gcomun",visible:0},{title:"Dpto",data:"numero",width:"3%"},{title:"Propietario",data:"propietario",width:"20%"},{title:" % Prtje",data:"prorretaje",width:"5%",render:function(e,c,b){return formatoPorcentaje(e);
}},{title:"Gasto Comun",data:"monto_gcomun_apto",width:"8%",render:function(e,c,b){return formatoCentimos(e);}},{title:"Fondo de Reserva",data:"monto_fondo_reserva",width:"8%",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Pagos Adicionales",data:"mes_pago_adicional",width:"8%",render:function(e,c,b){return formatoCentimos(e);}},{title:"Monto Total Mes",data:"monto_total_deudas",width:"8%",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Monto Pagado",data:"monto_total_abonado",width:"8%",render:function(e,c,b){return formatoCentimos(e);}},{title:"Saldo deudor",data:"saldo_deudor",width:"8%",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Saldo a favor",data:"saldo_a_favor",width:"8%",render:function(e,c,b){return formatoCentimos(e);}},{title:"Deuda",data:"deuda",width:"8%",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Sede",data:"id_sede",visible:0}],});};var cargarResumenGastosMes=function(a){$("#tablaResumenGastosComunes").dataTable({paging:false,ordering:false,info:false,searching:false,data:a,language:{url:"/DataTables-1.10.10/de_DE-all.txt"},columns:[{title:"Fecha de Facturacion",data:"fecha_inicio"},{title:"Mes de Facturación",data:"mes_inicio"},{title:"Monto de Gastos Comunes",data:"gastos_comunes",render:function(e,c,b){return formatoCentimos(e);
}},{title:"Monto de Pagos Adicionales",data:"gastos_adicionales",render:function(e,c,b){return formatoCentimos(e);}},{title:"Monto de Fondo De Reserva",data:"fondo_reserva",render:function(e,c,b){return formatoCentimos(e);
}}],});};function formatoCentimos(b){var a=b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");a=a.replace(",",".");signo="$";return signo.concat(a);}function formatoPorcentaje(b){var a=b.concat("%");
return a;}var cargarTablaDetalle=function(a){$("#TablaDetalle").dataTable({paging:false,searching:false,info:false,scrollY:"200px",scrollCollapse:true,columnDefs:[{targets:-1,data:null,searchable:false,}],language:{url:"/DataTables-1.10.10/de_DE-all.txt"},data:a,columns:[{title:"Id",data:"id",visible:0},{title:"Concepto(s)",data:"text"}],});
};var cargarTablaApartamentos=function(a){$("#tablaApartamentos").dataTable({columnDefs:[{targets:-1,data:null,targets:[1],searchable:true,}],language:{url:"/DataTables-1.10.10/de_DE-all.txt"},data:a,columns:[{title:"Id",data:"id_apartamento",visible:0},{title:"Propietario",data:"propietario"},{title:"Nro de Departamento",data:"numero"},{title:"Sede",data:"id_sede",visible:0},{title:"id_usuario",data:"id_usuario",visible:0}],});
SeleccionarTablaApartamentos();};var crearallcombos=function(a){crearcombo("#id_tipo_padre",a.v_tipo_padre);crearcombo("#id_tipo_gasto",a.v_tipo_padre);
crearcombo("#id_tipo_gastoP",a.v_tipo_padre);crearcombo("#mes",mes);crearcombo("#anios",a.v_anios);crearcombo("#id_apartamento",a.v_apartamentos_cbo);crearcombo("#id_concepto_detalle","");
crearcombo("#id_concepto_detalle_g","");};var mostrarConceptosTipo=function(a){if(a==1){switch(parseInt($("#id_tipo_gasto").val())){case 1:id_tipo_gasto=1;
break;case 2:id_tipo_gasto=2;break;case 3:id_tipo_gasto=3;break;case 4:id_tipo_gasto=4;break;default:id_tipo_gasto=0;break;}}if(a==2){switch(parseInt($("#id_tipo_gastoP").val())){case 1:id_tipo_gasto=1;
break;case 2:id_tipo_gasto=2;break;case 3:id_tipo_gasto=3;break;case 4:id_tipo_gasto=4;break;default:id_tipo_gasto=0;break;}}if(a==3){switch(parseInt($("#id_tipo_padre").val())){case 1:id_tipo_gasto=1;
break;case 2:id_tipo_gasto=2;break;case 3:id_tipo_gasto=3;break;case 4:id_tipo_gasto=4;break;default:id_tipo_gasto=0;break;}}BuscarCatalogoConcepto(id_tipo_gasto,a);
};var ProcesarPagos=function(){$("#id_periodo").val(d.periodos_pago);var a=$("#FormGasto").get(0);var b=new FormData(a);parametroAjax.data=b;parametroAjax.ruta=rutaP;
respuesta=procesarajaxfile(parametroAjax);ManejoRespuestaRegistrarP(respuesta);};var ProcesarPagosAdicionales=function(){var a={id_periodo:d.periodos_pago};
parametroAjax.data=$("#FormPagosA").serialize()+"&"+$.param(a);parametroAjax.ruta=rutaPA;respuesta=procesarajax(parametroAjax);ManejoRespuestaRegistrarPA(respuesta);
};var BuscarCatalogoConcepto=function(b,a){parametroAjax.data={id_tipo_gasto:b,caso:a};parametroAjax.ruta=rutaComboD;respuesta=procesarajax(parametroAjax);
ManejoRespuestaBuscarCombo(respuesta);};var ProcesarCatalogo=function(){parametroAjax.data=$("#FormCatalogo").serialize();parametroAjax.ruta=rutaC;respuesta=procesarajax(parametroAjax);
ManejoRespuestaBuscarP(respuesta);};var eliminarGastoAdicional=function(a){parametroAjax.data={id_pago_adicional:a};parametroAjax.ruta=rutaEliminarPA;respuesta=procesarajax(parametroAjax);
ManejoRespuestaEliminarPA(respuesta);};var eliminarGasto=function(a){parametroAjax.data={id_pago_gcomun:a};parametroAjax.ruta=rutaEliminarP;respuesta=procesarajax(parametroAjax);
ManejoRespuestaEliminarP(respuesta);};var cierreMesFacturacion=function(){var a={periodo_pago:d.periodos_pago};parametroAjax.data={id_periodo:a};parametroAjax.ruta=rutaCierre;
respuesta=procesarajax(parametroAjax);ManejoRespuestaCierreMes(respuesta);};var confirmarPagoPropietario=function(a){parametroAjax.data=a;parametroAjax.ruta=rutaConfirmarP;
respuesta=procesarajax(parametroAjax);ManejoRespuestaConfirmarPago(respuesta);};var rechazarPagoPropietario=function(a){parametroAjax.data=a;parametroAjax.ruta=rutaRechazarP;
respuesta=procesarajax(parametroAjax);ManejoRespuestaRechazarPago(respuesta);};var consultarPagos=function(){var a={mes:$("#mes").val(),anio:$("#anios").val(),id_apartamento:$("#id_apartamento").val()};
parametroAjax.data={parametros:a};parametroAjax.ruta=rutaCGC;respuesta=procesarajax(parametroAjax);ManejoRespuestaConsulta(respuesta);};var ManejoRespuestaRegistrarP=function(a){if(a.code=="200"){cancelarCargar();
mensajesAlerta("Procesado!","Registrado exitosamente","info");limpiarTablaPagos();cargarTablaGastos(a.respuesta.v_gastos);limpiarTablaResumenGastosComunes();
cargarResumenGastosMes(a.respuesta.v_total_gastos);limpiarTablaResumenGastosMes();cargarTablaGastosConsulta(a.respuesta.v_gastos_consulta);limpiarTablaCalculoGastosComunes();
cargarTablaConsultaGastos(a.respuesta.v_calculo_gcomunes);}else{mensajesAlerta("Error","Comuniquese con el personal de soporte técnico","error");}};var ManejoRespuestaRegistrarPA=function(b){if(b.code=="200"){var a=JSON.parse(b.respuesta.f_registro_pagos_adicionales[0].f_registro_pagos_adicionales);
switch(a.code){case"200":cerrarPagosAdicionales();mensajesAlerta("Procesado!",a.des_code,"info");limpiarTablaPagos();cargarTablaGastos(b.respuesta.v_gastos);
limpiarTablaPagosAdicionales();cargarTablaGastosAdicionales(b.respuesta.v_gastos_adicionales);limpiarTablaResumenGastosComunes();cargarResumenGastosMes(b.respuesta.v_total_gastos);
limpiarTablaResumenGastosMes();cargarTablaGastosConsulta(b.respuesta.v_gastos);limpiarTablaCalculoGastosComunes();cargarTablaConsultaGastos(b.respuesta.v_calculo_gcomunes);
limpiarTablaPagosAdicionalesConsulta();cargarTablaGastosAdicionalesConsulta(b.respuesta.v_gastos_adicionales);break;case"-2":mensajesAlerta("Error",a.des_code,"error");
break;default:mensajesAlerta("Error","Comuniquese con el personal de soporte técnico","error");}}else{mensajesAlerta("Error","Comuniquese con el personal de soporte técnico","error");
}};var ManejoRespuestaEliminarP=function(a){if(a.code=="200"){$("#modalGasto").window("close");mensajesAlerta("Procesado!","Su solicitud ha sido procesada","info");
limpiarTablaPagos();cargarTablaGastos(a.respuesta.v_gastos);limpiarTablaPagosAdicionales();cargarTablaGastosAdicionales(a.respuesta.v_gastos_adicionales);
limpiarTablaResumenGastosComunes();cargarResumenGastosMes(a.respuesta.v_total_gastos);limpiarTablaResumenGastosMes();cargarTablaGastosConsulta(a.respuesta.v_gastos);
limpiarTablaCalculoGastosComunes();cargarTablaConsultaGastos(a.respuesta.v_calculo_gcomunes);limpiarTablaPagosAdicionalesConsulta();cargarTablaGastosAdicionalesConsulta(a.respuesta.v_gastos_adicionales);
}else{mensajesAlerta("Error","Comuniquese con el personal de soporte técnico","error");}};var eliminarGastoComun=function(){eliminarGasto(Registrogasto.id_pago_gcomun);
};var ManejoRespuestaEliminarPA=function(a){if(a.code=="200"){mensajesAlerta("Procesado!","Su solicitud ha sido procesada","info");limpiarTablaPagos();
cargarTablaGastos(a.respuesta.v_gastos);limpiarTablaPagosAdicionales();cargarTablaGastosAdicionales(a.respuesta.v_gastos_adicionales);limpiarTablaResumenGastosComunes();
cargarResumenGastosMes(a.respuesta.v_total_gastos);limpiarTablaResumenGastosMes();cargarTablaGastosConsulta(a.respuesta.v_gastos);limpiarTablaCalculoGastosComunes();
cargarTablaConsultaGastos(a.respuesta.v_calculo_gcomunes);limpiarTablaPagosAdicionalesConsulta();cargarTablaGastosAdicionalesConsulta(a.respuesta.v_gastos_adicionales);
}else{mensajesAlerta("Error","Comuniquese con el personal de soporte técnico","error");}};var ManejoRespuestaCierreMes=function(b){if(b.code=="200"){var a=JSON.parse(b.respuesta.f_registro_cierre_mes[0].f_registro_cierre_mes);
switch(a.code){case"200":$("#modalCierre").window("close");mensajesAlerta("Procesado!",a.des_code,"info");limpiarTablaPagos();cargarTablaGastos(b.respuesta.v_gastos);
limpiarTablaPagosAdicionales();cargarTablaGastosAdicionales(b.respuesta.v_gastos_adicionales);limpiarTablaResumenGastosComunes();cargarResumenGastosMes(b.respuesta.v_total_gastos);
limpiarTablaResumenGastosMes();cargarTablaGastosConsulta(b.respuesta.v_gastos);limpiarTablaCalculoGastosComunes();cargarTablaConsultaGastos(b.respuesta.v_calculo_gcomunes);
limpiarTablaPagosAdicionalesConsulta();cargarTablaGastosAdicionalesConsulta(b.respuesta.v_gastos_adicionales);break;case"-2":mensajesAlerta("Error",a.des_code,"error");
break;default:mensajesAlerta("Error","Comuniquese con el personal de soporte técnico","error");}}else{mensajesAlerta("Error","Comuniquese con el personal de soporte técnico","error");
}};var ManejoRespuestaConsulta=function(a){if(a.code=="200"){limpiarTablaResumenGastosComunes();cargarResumenGastosMes(a.respuesta.v_totales_mes);v_totales_mes=a.respuesta.v_totales_mes;
limpiarTablaResumenGastosMes();cargarTablaGastosConsulta(a.respuesta.v_gastos);v_gastos=a.respuesta.v_gastos;limpiarTablaPagosAdicionalesConsulta();cargarTablaGastosAdicionalesConsulta(a.respuesta.v_gastos_adicionales);
v_gastos_adicionales=a.respuesta.v_gastos_adicionales;limpiarTablaCalculoGastosComunes();cargarTablaConsultaGastos(a.respuesta.v_calculo_gcomunes);v_gastos_adicionales=a.respuesta.v_calculo_gcomunes;
}else{mensajesAlerta("Error","Comuniquese con el personal de soporte técnico","error");}};var ManejoRespuestaConfirmarPago=function(a){if(a.code=="200"){mensajesAlerta("Procesado!","El pago fue confirmado exitosamente","info");
limpiarTablaPagosPropietarios();cargarTablaPagosPropietario(a.respuesta.v_pagos_propietarios);}else{mensajesAlerta("Error","Comuniquese con el personal de soporte técnico","error");
}};var ManejoRespuestaRechazarPago=function(a){if(a.code=="200"){mensajesAlerta("Procesado!","El pago fue rechazado exitosamente","info");limpiarTablaPagosPropietarios();
cargarTablaPagosPropietario(a.respuesta.v_pagos_propietarios);limpiarTablaPagos();cargarTablaGastos(a.respuesta.v_gastos);limpiarTablaGastosComunes();cargarTablaGastosComunes(a.respuesta.v_gastos);
}else{mensajesAlerta("Error","Comuniquese con el personal de soporte técnico","error");}};var ManejoRespuestaBuscarCombo=function(a){if(a.code=="200"){if(a.respuesta.caso=="1"){$("#id_concepto_detalle_g").empty();
crearcombo("#id_concepto_detalle_g",a.respuesta.v_conceptos);}if(a.respuesta.caso=="2"){$("#id_concepto_detalle").empty();crearcombo("#id_concepto_detalle",a.respuesta.v_conceptos);
}if(a.respuesta.caso=="3"){destruirTablaS("TablaDetalle");cargarTablaDetalle(a.respuesta.v_conceptos);}}};var ManejoRespuestaBuscarP=function(b){if(b.code=="200"){var a=JSON.parse(b.respuesta.f_registro);
switch(a.code){case"200":destruirTablaS("TablaDetalle");cargarTablaDetalle(b.respuesta.v_catalogo);mensajesAlerta("Procesado!",a.des_code,"info");$(".descripcion").val("");
break;case"-2":mensajesAlerta("Error",a.des_code,"error");break;default:mensajesAlerta("Error","Comuniquese con el personal de sopore técnico","error");
}}else{mensajesAlerta("Error","Comuniquese con el personal de sopore técnico","error");}};var mostrarApartamentos=function(){$("#modalApartamentos").window("open");
};var asignarFecha=function(){$("#modalAsignarFecha").window("open");};var cierreMes=function(){$("#modalCierre").window("open");};var cargarTotalesCierre=function(a){if(a[0].fecha_inicio!=null){$(".fecha_facturacion_mes").text(a[0].fecha_inicio);
}if(a[0].mes_inicio!=null){$(".mes_facturacion").text(a[0].mes_inicio);}if(a[0].gastos_comunes!=null){$(".mto_gastos_comunes").text(a[0].gastos_comunes+"$");
}if(a[0].gastos_adicionales!=null){$(".mto_pagos_adicionales").text(a[0].gastos_adicionales+"$");}if(a[0].fondo_reserva!=null){$(".mto_fondo_reserva").text(a[0].fondo_reserva+"$");
}};var visualizarGasto=function(a){if(a.tipo_gasto!=null){$(".tipo_gasto").text(a.tipo_gasto);}if(a.concepto_detalle!=null){$(".concepto_detalle").text(a.concepto_detalle);
}if(a.descripcion!=null){$(".descripcion").text(a.descripcion);}if(a.fecha_factura!=null){$(".fecha_factura").text(a.fecha_factura);}if(a.urlimage!=null){$(".urlimage").text(a.urlimage);
}if(a.monto!=null){$(".monto").text(a.monto);}if(a.fecha_carga!=null){$(".fecha_carga").text(a.fecha_carga);}if(a.urlimage!=null){$(".urlimage").text(a.urlimage);
}$("#modalGasto").window("open");};var SeleccionarTablaApartamentos=function(b){var a=$("#tablaApartamentos").dataTable();$("#tablaApartamentos tbody").on("click","tr",function(c){a.$("tr.selected").removeClass("selected");
$(this).addClass("selected");RegistroApartamento=TablaTraerCampo("tablaApartamentos",this);});a.on("dblclick","tr",function(){$(".id_apartamento").val(RegistroApartamento.id_apartamento);
$("#id_usuario").val(RegistroApartamento.id_usuario);$("#numero_apto").text(RegistroApartamento.propietario+", Apartamento # "+RegistroApartamento.numero);
$("#modalApartamentos").window("close");});};var cargarPagosA=function(){$(".divConsulta").hide();$(".divGastos").hide();$(".divCatalogo").hide();$(".divCalculoPrevio").hide();
$(".divCalculoPrevio").hide();$(".divPagosPropietarios").hide();$(".divPagosA").show();$(".boton1").removeClass("botonSeleccion").addClass("botonNoSeleccion");
$(".boton2").removeClass("botonSeleccion").addClass("botonNoSeleccion");$(".boton3").removeClass("botonNoSeleccion").addClass("botonSeleccion");$(".boton4").removeClass("botonSeleccion").addClass("botonNoSeleccion");
$(".boton5").removeClass("botonSeleccion").addClass("botonNoSeleccion");};var mostrarGastos=function(){$(".divConsulta").hide();$(".divCargar").hide();
$(".divCatalogo").hide();$(".divPagosA").hide();$(".divCalculoPrevio").hide();$(".divPagosPropietarios").hide();$(".divGastos").show();$(".boton1").removeClass("botonSeleccion").addClass("botonNoSeleccion");
$(".boton2").removeClass("botonNoSeleccion").addClass("botonSeleccion");$(".boton3").removeClass("botonSeleccion").addClass("botonNoSeleccion");$(".boton4").removeClass("botonSeleccion").addClass("botonNoSeleccion");
$(".boton5").removeClass("botonSeleccion").addClass("botonNoSeleccion");};var mostrarPagosPropietarios=function(){$(".divConsulta").hide();$(".divCargar").hide();
$(".divCatalogo").hide();$(".divPagosA").hide();$(".divCalculoPrevio").hide();$(".divGastos").hide();$(".divPagosPropietarios").show();$(".boton1").removeClass("botonSeleccion").addClass("botonNoSeleccion");
$(".boton2").removeClass("botonSeleccion").addClass("botonNoSeleccion");$(".boton3").removeClass("botonSeleccion").addClass("botonNoSeleccion");$(".boton4").removeClass("botonNoSeleccion").addClass("botonSeleccion");
$(".boton5").removeClass("botonSeleccion").addClass("botonNoSeleccion");};var calculoPrevio=function(){$(".divConsulta").hide();$(".divCargar").hide();
$(".divCatalogo").hide();$(".divPagosA").hide();$(".divGastos").hide();$(".divPagosPropietarios").hide();$(".divCalculoPrevio").show();};var MostrarCatalogos=function(){$(".divConsulta").hide();
$("#FormCatalogo")[0].reset();$(".divGastos").hide();$(".divPagosA").hide();$(".divCatalogo").show();$(".divCalculoPrevio").hide();$(".divPagosPropietarios").hide();
$("#spanTituloEncuesta").text("Registro de conceptos de pago");$(".boton1").removeClass("botonSeleccion").addClass("botonNoSeleccion");$(".boton2").removeClass("botonSeleccion").addClass("botonNoSeleccion");
$(".boton3").removeClass("botonSeleccion").addClass("botonNoSeleccion");$(".boton4").removeClass("botonSeleccion").addClass("botonNoSeleccion");$(".boton5").removeClass("botonNoSeleccion").addClass("botonSeleccion");
};var VolverCatalogos=function(){$(".divConsulta").hide();$(".divCatalogo").hide();$(".divPagosA").hide();$(".divCalculoPrevio").hide();$(".divPagosPropietarios").hide();
$(".divGastos").show();};var consultarGastos=function(){$(".divConsulta").show();$(".divCatalogo").hide();$(".divPagosA").hide();$(".divCalculoPrevio").hide();
$(".divPagosPropietarios").hide();$(".divGastos").hide();$(".boton1").removeClass("botonNoSeleccion").addClass("botonSeleccion");$(".boton2").removeClass("botonSeleccion").addClass("botonNoSeleccion");
$(".boton3").removeClass("botonSeleccion").addClass("botonNoSeleccion");$(".boton4").removeClass("botonSeleccion").addClass("botonNoSeleccion");$(".boton5").removeClass("botonSeleccion").addClass("botonNoSeleccion");
};var cancelarCargar=function(){$("#divCargar").window("close");};var cancelarModalCargar=function(){$("#modalGasto").window("close");};var cargarGasto=function(){$("#divCargar").window("open");
};var cargarGastoCerrar=function(){$("#divCargar").window("close");};var cargarGastoAdicional=function(){$("#divPagosAR").window("open");};var cerrarPagosAdicionales=function(){$("#divPagosAR").window("close");
};var cancelarFecha=function(){$("#modalAsignarFecha").window("close");};var descargarImagen=function(){OpenWindowWithPost("/reportes/visualizar_factura.php","","_blank",Registrogasto);
};var cerrarCierreMes=function(){$("#modalCierre").window("close");};var limpiarTablaPagosAdicionales=function(){destruirTablaS("tablaGastosAdicionales");
};var limpiarTablaPagos=function(){destruirTablaS("tablaGastos");};var limpiarTablaCalculoGcomunes=function(){destruirTablaS("tablaCalculoGcomunes");};
var limpiarTablaGastosComunes=function(){destruirTablaS("tablaGastosComunes");};var limpiarTablaPagosPropietarios=function(){destruirTablaS("tablaPagosPropietarios");
};var limpiarTablaGastosComunesConsulta=function(){destruirTablaS("tablaConsultaGastos");};var limpiarTablaResumenGastos=function(){destruirTablaS("tablaResumenGastosMes");
};var limpiarTablaResumenGastosComunes=function(){destruirTablaS("tablaResumenGastosComunes");};var limpiarTablaResumenGastosMes=function(){destruirTablaS("tablaResumenGastosMes");
};var limpiarTablaCalculoGastosComunes=function(){destruirTablaS("tablaConsultaGastos");};var limpiarTablaPagosAdicionalesConsulta=function(){destruirTablaS("tablaGastosAdicionalesConsulta");
};var validarC=function(){$("#FormCatalogo").formValidation("validate");};var validarPago=function(){$("#FormGasto").formValidation("validate");};var validarPagosAdicionales=function(){$("#FormPagosA").formValidation("validate");
};var mostrarCal=function(){$("#fecha_factura").focus();};var validarConsulta=function(){$("#FormConsulta").formValidation("validate");};$(document).ready(function(){$(document).on("click","#divConsulta",consultarGastos);
$(document).on("click","#agregarGasto",cargarGasto);$(document).on("click","#guardarCargarPago",validarPago);$(document).on("click","#agregarGastoA",cargarGastoAdicional);
$(document).on("click","#cerrarPagosAdicionales",cerrarPagosAdicionales);$(document).on("click","#cancelarCargar",cancelarCargar);$(document).on("click","#cancelarModalGasto",cancelarModalCargar);
$(document).on("click","#divGastos",mostrarGastos);$(document).on("click","#divPagosA",cargarPagosA);$(document).on("click","#btnApartamento",mostrarApartamentos);
$(document).on("click","#spanConceptos",MostrarCatalogos);$(document).on("click","#volverC",VolverCatalogos);$(document).on("click","#cargarC",validarC);
$(document).on("click","#guardarPagosAdicionales",validarPagosAdicionales);$(document).on("click","#calculoPrevio",calculoPrevio);$(document).on("click",".cal",mostrarCal);
$(document).on("click","#divPagosPropietarios",mostrarPagosPropietarios);$(document).on("click","#cierreMes",cierreMes);$(document).on("click","#consultaPagos",validarConsulta);
$(document).on("click","#asignarFecha",asignarFecha);$(document).on("click","#cancelarFecha",cancelarFecha);$(document).on("click","#eliminarGasto",eliminarGastoComun);
$(document).on("click","#cancelarCierre",cerrarCierreMes);$(document).on("click","#confirmarCierre",cierreMesFacturacion);$(document).on("click","#imprimirGasto",imprimirGasto);
$(document).on("click","#descargarImagen",descargarImagen);$(".boton1").addClass("botonSeleccion");$(".boton2").addClass("botonNoSeleccion");$(".boton3").addClass("botonNoSeleccion");
$(".boton4").addClass("botonNoSeleccion");$(".boton5").addClass("botonNoSeleccion");$(".moneda").priceFormat({prefix:"",thousandsSeparator:".",centsLimit:0});
var c=$("#fecha_factura").datetimepicker();var a=$("#fecha_facturacion").datetimepicker();$("#id_tipo_gasto").change(function(){mostrarConceptosTipo(1);
});$("#id_tipo_gastoP").change(function(){mostrarConceptosTipo(2);});$("#id_tipo_padre").change(function(){mostrarConceptosTipo(3);});cargarTablaGastos(d.v_gastos);
cargarTablaGastosConsulta(d.v_gastos_consulta);cargarTablaConsultaGastos(d.v_calculo_gcomunes);cargarTablaGastosAdicionales(d.v_gastos_adicionales);cargarTablaGastosAdicionalesConsulta(d.v_gastos_adicionales_consulta);
cargarTablaGastosComunes(d.v_gastos);cargarTablaApartamentos(d.v_apartamentos);cargarTablaPagosPropietario(d.v_pagos_propietarios);cargarResumenGastosMes(d.v_total_gastos);
cargarTotalesCierre(d.v_total_gastos);crearallcombos(d);var f=$("#tablaGastos").dataTable();$("#tablaGastos tbody").on("click","tr",function(g){f.$("tr.selected").removeClass("selected");
$(this).addClass("selected");Registrogasto=TablaTraerCampo("tablaGastos",this);visualizarGasto(Registrogasto);});f.on("dblclick","tr",function(){$("#close").trigger("click");
});var b=$("#tablaPagosPropietarios").dataTable();$("#tablaPagosPropietarios tbody").on("click","tr",function(g){b.$("tr.selected").removeClass("selected");
$(this).addClass("selected");RegistroPagoPropietario=TablaTraerCampo("tablaPagosPropietarios",this);});b.on("dblclick","tr",function(){$("#close").trigger("click");
});var e=$("#tablaGastosAdicionales").dataTable();$("#tablaGastosAdicionales tbody").on("click","tr",function(g){e.$("tr.selected").removeClass("selected");
$(this).addClass("selected");Registrogastoadicional=TablaTraerCampo("tablaGastosAdicionales",this);});e.on("dblclick","tr",function(){$("#close").trigger("click");
});$(function(){$.contextMenu({selector:"#tablaGastosAdicionales",callback:function(h,g){switch(h){case"1":eliminarGastoAdicional(Registrogastoadicional);
break;}},items:{"1":{name:"Eliminar",icon:"delete"},}});});$(function(){$.contextMenu({selector:"#tablaPagosPropietarios",callback:function(h,g){switch(h){case"1":if(RegistroPagoPropietario.estatus=="A"){confirmarPagoPropietario(RegistroPagoPropietario);
}else{mensajesAlerta("Error","No puede cambiar el estatus del Pago, registre uno nuevo","error");}break;case"2":if(RegistroPagoPropietario.estatus=="A"){rechazarPagoPropietario(RegistroPagoPropietario);
}else{mensajesAlerta("Error","No puede cambiar el estatus del Pago, registre uno nuevo","error");}break;}},items:{"1":{name:"Confirmar",icon:"edit"},"2":{name:"Rechazar",icon:"delete"},}});
});$("#TablaDetalle").dataTable({paging:false,searching:false,info:false,columnDefs:[{targets:-1,data:null,targets:[1],searchable:false,}],columns:[{title:"Id",data:"id_concepto_detalle",visible:0},{title:"Concepto(s)",data:"descripcion"}],language:{url:"/DataTables-1.10.10/de_DE-all.txt"},});
$("#FormCatalogo").formValidation({fields:{id_tipo_padre:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},descripcion:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},}}).on("success.form.fv",function(g){ProcesarCatalogo();
}).on("status.field.fv",function(h,g){g.element.parents(".form-group").removeClass("has-success");});$("#FormConsulta").formValidation({fields:{mes:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},anios:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}}}}).on("success.form.fv",function(g){consultarPagos();
}).on("status.field.fv",function(h,g){g.element.parents(".form-group").removeClass("has-success");});$("#FormPagosA").formValidation({fields:{id_tipo_gastoP:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},id_concepto_detalle:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},monto:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},descripcion:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},}}).on("success.form.fv",function(g){ProcesarPagosAdicionales();
}).on("status.field.fv",function(h,g){g.element.parents(".form-group").removeClass("has-success");});$("#FormGasto").formValidation({fields:{id_tipo_gastoP:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},id_concepto_detalle:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},monto:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},descripcion:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},urlimage:{validators:{notEmpty:{message:"Por favor, cargue la imagen de la factura."},file:{extension:"jpeg,jpg,png",type:"image/jpeg,image/png",maxSize:2097152,message:"El archivo cargado no es válido"}}},fecha_factura:{verbose:false,validators:{notEmpty:{message:"El campo es requerido."},}},}}).on("success.form.fv",function(g){ProcesarPagos();
}).on("status.field.fv",function(h,g){g.element.parents(".form-group").removeClass("has-success");});});