function SaveToDisk(b,e){if(!window.ActiveXObject){var c=document.createElement("a");c.href=b;c.target="_blank";c.download=e||"unknown";var a=new MouseEvent("click",{view:window,bubbles:true,cancelable:false});
c.dispatchEvent(a);(window.URL||window.webkitURL).revokeObjectURL(c.href);}else{if(!!window.ActiveXObject&&document.execCommand){var d=window.open(b,"_blank");
d.document.close();d.document.execCommand("SaveAs",true,e||b);d.close();}}}var procesarajax=function(c,b,a){$.ajax({url:b,headers:{"X-CSRF-TOKEN":$("input[name=_token]").val()},type:"POST",async:false,dataType:"JSON",data:c,}).done(function(d){switch(a){case 1:console.log(d);
break;case 3:url="/report/"+d.ruta;SaveToDisk(url,"descarga.pdf");break;default:break;}}).fail(function(e,d){var f="";if(e.status===0){f="Not connect.\n Verify Network.";
}else{if(e.status==422){}else{if(e.status==404){f="Requested page not found. [404]";}else{if(e.status==500){f="Internal Server Error [500]. Si el error persiste comuníquese con informática.";
}else{if(d==="parsererror"){f="Requested JSON parse failed.";}else{if(d==="timeout"){f="Time out error.";}else{if(d==="abort"){f="Ajax request aborted.";
}else{f="Uncaught Error.\n"+e.responseText;}}}}}}}mensajesAlerta("Error",f,"error");});};var destroycombosfechas=function(){if($("#divfecha_desde").data("DateTimePicker")){$("#divfecha_desde").data("DateTimePicker").destroy();
}if($("#divfecha_hasta").data("DateTimePicker")){$("#divfecha_hasta").data("DateTimePicker").destroy();}};var crearFecha=function(a,b){$(a).datetimepicker({format:b,locale:"es",});
};var selecionarReporte=function(a){a=parseInt(a);$(".mostrar").show();switch(a){case 1:$("#divfechahasta").hide();destroycombosfechas();crearFecha(".fecha","DD/MM/YYYY");
break;case 2:destroycombosfechas();crearFecha(".fecha","MM/YYYY");break;case 3:$("#divCombofecha").hide();break;default:$("#divCombofecha").hide();break;
}};var seleccion=function(b){var a=$("#reportes").DataTable();a.rows(function(c,e,d){if(e.id_reporte==b){$(d).addClass("selected");}}).data();};var procesar=function(){console.log("Si llega");
id_reporte=parseInt($("#id_reporte").val());console.log(id_reporte);switch(id_reporte){case 1:break;case 2:break;case 3:console.log("Va al reporte constancia de trabajo");
procesarajax({id_reporte:id_reporte},datos.rutaprocesarconsulta,3);break;break;}console.log();};function OpenWindowWithPost(c,e,b,g){var f=document.createElement("form");
f.setAttribute("method","post");f.setAttribute("action",c);f.setAttribute("target",b);for(var d in g){if(g.hasOwnProperty(d)){var a=document.createElement("input");
a.type="hidden";a.name=d;a.value=g[d];f.appendChild(a);}}document.body.appendChild(f);f.submit();document.body.removeChild(f);}$(document).ready(function(){$("#reportes").DataTable({scrollY:"200px",scrollCollapse:true,paging:false,data:obj,language:lenguajeTabla,columns:[{title:"id_reporte",data:"id_reporte",visible:0},{title:"Solicitud",data:"des_reporte"},{title:"Detalle de la solicitud",data:"detalle_reporte"},{title:"poderes",data:"poder",visible:0}]});
var a=$("#reportes").dataTable();$("#reportes tbody").on("click","tr",function(){a.$("tr.selected").removeClass("selected");$(this).addClass("selected");
$(".has-error").removeClass("has-error");$("p").remove(".text-danger");});$("#reportes").on("click","tbody tr",function(){var c=a.fnGetPosition(this);var b=a.fnGetData(c);
$("#id_reporte").val(b.id_reporte);selecionarReporte(b.id_reporte);});if($("#id_reporte").val()){seleccion($("#id_reporte").val());selecionarReporte($("#id_reporte").val());
}else{selecionarReporte(1);seleccion(1);$("#id_reporte").val(1);}$(document).on("click","#aceptar",procesar);});